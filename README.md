# samson2.2
У нас есть план для изучения. Для его освоения будут различные задания. По мере выполнения, если будут возникать вопросы, обращайтесь, отвечу. По мере готовности пишите, буду присылать следующие части. В начале надо освоить много теоретического материала. В целом PHP близок к C++, поэтому проблем с освоением не будет.
Для удобства разработки есть 2 варианта, использовать виртуальную машину (в задании ) или установить в ОС соответствующие службы.


1.1. Изучить:

- Что происходит от запроса в браузере до отрисовки страницы. Как обрабатывает страницу браузер. Обратить внимание на домены, DNS, службы сервера.

- Детально об архитектуре сервера и вариантах реализаций.

- Хранилище данных. Виды, цели. Базы данных. Зачем они нужны.

- MySql. Apache. PHP. В каком порядке подключается. Зона ответственности. Настройка и модули (основные).

- IDE. Зачем? Возможности.

- Клиенты баз данных (пример, HeidiSQL).

1.2. Задание

- Установить VirtualBox. Скачать BitrixVM http://www.1c-bitrix.ru/products/vmbitrix/index.php  ИЛИ Установить и настроить связку MySql + Apache + PHP.

- IDE, установка, настройка. Проверить работа на простой html:

<htm l><body><h1>Hello world<h1><img src="/1.jpg"></body></html>

- Проверить работу phpinfo(). Установить HeidiSQL, установка и настройка. Создать тестовую БД. Создать таблицу из 2 столбцов, наполнить произвольными данными.

 - Изучить основы HTML и CSS.

- Изучить возможности .htaccess.
- Настройки запретов на выполнение php в upload, img и js. Создать новый домен test.local и поддомен img.test.local. В img.test.local запретить выполнение php. На доменах добавить обработку ошибок 404. Добавить обработку запросов http://img.test.local/s10.jpg из директории /img.test.local/goods/s/10.jpg Добавить обработку запросов http://img.test.local/m10.jpg из директории /img.test.local/goods/m/10.jpg

2.1 Изучить

Основы PHP. Как устроено. Синтаксис, типы данных, константы, переменные и ссылка, обратить внимание на массивы (как устроены). Выражения, операторы, конструкции, области видимости. Во многом похоже на C++, но есть нюансы. Функции и классы, обращения к функциям через переменные, функции в переменных, eval. ООП в PHP

Изучить правила написания кода.

2.2. Задание

Посчитать количество простых чисел в диапазоне от 10 до 53.

Создать массив массивов по 3 простых числа [[a=>11,b=>13,с=>17],[a=>19,b=>23…]…]

Для полученного массива посчитать площади трапеций по 3 величинам (предыдущий массив a, b и высота с) и дописать значение в массиве с ключем «s».

Вывести размеры трапеции, у которой максимальная площадь, но не больше 1400 (do{}while();).

Написать функцию возведения в степень.

Написать функцию определения минимального числа в массиве.

Написать функцию расчета по формуле f=(a*b^c+(((a/c)^b)%3)^min(a,b,c)) используя написанные ранее функции.

Посчитать по данной формуле ранее посчитанные массивы.

Циклом, используя ссылки, отметить все трапеции, чья площадь нечетное значение.

Вывести результат в виде таблицы: a, b, c, s, f, нечетный.

 

Изучить: Стандарт кодирования Zend Framework  (например тут https://framework.zend.com/manual/1.11/ru/coding-standard.coding-style.html)

Настроить IDE для работы с правилами кодирования и проектами.

Написать несколько классов:

- реализующий расчет по формулам выше

- реализующий расчет по формуле f2=((a+b)^c*(a/c)^min(a,b,c))

- вспомогательный класс, объединяющий в себе общие функции для расчетов

- организующий вывод данных в табличном виде (получение значения через функцию getValue())

3.1 Изучить

PHP. Встроенные функции: работа с переменными, математические, строковые, массивы, время. Предопределенные константы и переменные. Ошибки и исключения.

Работа с внешними ресурсами: с файлы, БД, XML.

Работа с POST/GET/COOKIE. Заголовки.

Безопасность. Исключения.

Предопределенные константы и суперглобальные переменные. Отладка, встроенные функции для отладки и работы с ресусами скрипта (обратить внимание на debug_*, var_dump(), var_export()).

Системы контроля версий Svn/Git, обратить внимание на различия. GIT в приоритете. Понятия master/branch/tag. Различные модели ветвений и работы с веткаим, пример статьи https://habrahabr.ru/post/106912/

 

3.2. Задание

Использовать для работы с GIT встроенный в IDE функционал или установить https://tortoisegit.org/

Зарегистрироваться и создать проект в https://github.com/. Ссылку на проект прислать по электронной почте.

Добавить в репозиторий все файлы сайтов написанные ранее по заданиям (апач, пхп и тд не надо, только файлы сайтов и .htaccess)

Освоить работу с гитом.

Сделать ветку step2, переключиться  на нее, дальнейшие задания выполнять в ней. После выполнения каждого пункта задания делать комит в ветку step2, в конце сделать мерж из ветки step2 в master, и сделать таг r.0.1

 

Написать функции:

- если строка содержит 2 подстроки, то замена второго вхождения на инвертированную подстроку, пример: исходная строка «abcdbce» подстрока «bc» результат «abcdcbe»

- реализовать сортировку двумерных массивов по заданному ключу в указанном направлении, пример: исходное [[a=>3],[a=>2,b=>8]….] для ключа «a» по возрастанию на выходе [[a=>2,b=>8], [a=>3]….]

- добавить обработку исключений для имеющегося функционала

- изучить переменные $_REQUEST, $_POST, $_GET, $_COOKIE, $_SERVER, обратить в каких приоритетах  образуется $_REQUEST

Установить и настроить xdebug. Освоить работу с ним в IDE.

- в БД создать базу test_rubric и таблицы для хранения данных, примерно такая структура (желательно сразу подумать над архитектурой и реализовать максимально гибкую, в процессе выполнения будет более понятно что требуется добавить или убрать):

-- товар: ид, код, название

-- свойства товаров: товар, значение свойства

-- рубрики: ид, код, название

-- связь товар и рубрика

-- связь товар, тип цены и цена

--  наполнить произвольными данными

-- модифицировать структуру таблицы так, чтобы была возможность хранить многоуровневый рубрикатор, уровень вложенности неограничен

- вывести из БД список товаров и их цены (максимальную и минимальную)

- добавить фильтр по названию товара (с возможностью передать ссылку на отфильтрованный товар)

- создать форму загрузки xml-файла в БД в соответствии с заданным типом (2.2.xml)

Реализовать функционал экспорта каталога в xml-файл в соответствии с входным форматом (2.2.xml).

Вывод рубрикатора товаров. Функционал фильтра по цене. В просмотре рубрики выводить все товары этого раздела и подразделов.

Выгрузить дамп получившейся БД в файл и добавить в репозиторий.

Дальнейшее изучение php.

- Зарегистрироваться на сайте https://dev.1c-bitrix.ru/

- Документация по битрикс https://dev.1c-bitrix.ru/api_help/ и можно скачать тут https://dev.1c-bitrix.ru/docs/php.php#tab-online-link (Вкладка «Разработчикам»).

- Скачать дистрибутив битрикс можно https://www.1c-bitrix.ru/download/cms.php версию «Эксперт»

- В разделе «Мое обучение» есть список доступных и пройденных курсов.

- Пройти курс «Контент-менеджер», «Администратор. Базовый»

- Пройти курс «Интеграция дизайна и настройка платформы» http://academy.1c-bitrix.ru/education/index.php?COURSE_ID=65&INDEX=Y

- Пройти курс «Разработчик Bitrix Framework»

- Пройти сертификацию по освоенным курсам

- Так же полезные материалы можно найти тут https://academy.1c-bitrix.ru/online/

- По ходу выполнения заданий курса «Интеграция дизайна и настройка платформы» в репозиторий добавлять все кроме папок bitrix и upload (сразу добавить в игнор лист)

Блок заданий №5

Пришлите ссылку на анкету специалиста в 1с-битрикс https://dev.1c-bitrix.ru/learning/mylearning.php#tab-anketa-link

- Установить демку версии Эксперт  «Копоратиный сайт производственной компании»

- На этапе установки изменить поля магазина.

- добавить все в репозиторий (в игнор /bitrix/, /upload/)

- Изменить в шапке сайта название и время работы.

- После установки изменить шаблон главного меню сайта, включить вывод 3х уровней меню. Переименовать раздел «Продукция» в «Каталог». Добавить раздел «Акции» и «Партнерам». Индексную в акциях переименовать в «Условия сотрудничества», добавить страницу «Как стать партнером» и подраздел «Расписание мероприятий». Указать описания и свойства страниц. В разделе «Расписание мероприятий» свойства должны наследоваться от раздела «Партнерам». На странице «Контакты» добавить стандартную форму обратной связи, настроить почтовый шаблон.

 

- Создать новый шаблон на основе верстки из курса «Интеграция дизайна и настройка платформы» (или приложенного архива page.html). Шаблон должен храниться в /local/.

- Создать раздел сайта /admin/ и новый шаблон сайта. Подключить новый шаблон к данному разделу. Доступ в раздел только для группы администраторов. Функционал раздела и главное меню не связаны с сайтом (т.е. в меню сайта не должен выводиться данный раздел, в меню раздела не должно быть меню остального сайта).

- При интеграции использовать языковые файлы. В header должны устанавливаться заголовки, свойства страниц, подключаться все необходимые CSS/JS. Подключаться битриксовая панель.

- Кастомизировать шаблоны меню и интегрировать верстку. Хлебные крошки. Включаемые области.

- Добавить подраздел «Инфоблоки» (/admin/iblock/).

- На странице /admin/iblock/index.php списка новостей (на основе готового компонента битрикс).  Сделать вывод детальной информации новостей в списке новостей. Выводить первых 10 слов и псевдо-ссылку «показать все». При клике по ней отображать оставшийся текст и заменять псевдо-ссылку на «скрыть все». Повторный клик – сворачивает текст.  Так же вывод ссылки на просмотр детальной страницы.

- На странице /admin/iblock/detail.php реализовать вывод детальной страницы новости (сделать свой компонент в папке /local/).  Сделать вывод названия новости, изображения, детальной информации и всех доп. свойств инфоблока «Новости». Вывести список похожих новостей (до 5 ссылок). Определяются на основании наличию любой другой новости, в названии которой есть хотя бы одно слово (не менее 4 букв) из названия просматриваемой новости.

- Добавить подраздел просмотра списка пользователей в админ разделе. Сделать компонент просмотра списка пользователей и просмотра детальной информации по пользователю. Адрес страницы просмотра пользователя должен быть вида «/admin/users/#LOGIN#/», где #LOGIN# - логин пользователя. В списке должна быть фильтрация по дате последней авторизации и возможность поиска по емэйлу.

Блок заданий №6

 

Изучить:

- Изучить синтаксис и основы JS. Работа с объектами.

- JQuery, возможности, плагины (обратить внимание на Fancybox для дальнейшего задания).

- Знакомство с BX API https://dev.1c-bitrix.ru/api_help/js_lib/index.php

- Технология Ajax. Доступные возможности, параметры, обработка результатов. Обратить внимание на загрузку файлов.

Написать функции:

- В административном разделе битрикс добавить новую веб-форму:

-- 2 статуса: Новый, Обработан

-- 3 вопроса:  ФИО, Описание, Файл

--2 поле: Время обработки, Комментарий

- На странице /admin/form /index.php реализовать вывод писка результатов новой веб-формы, выводимые поля в таблице: дата результата, ФИО, статус.

- Над таблицей добавить кнопку «Создать»

-- Но нажатию появляется форма во всплывающем окне (JQuery, Fancybox)

-- В форме выводятся вопросы формы

-- результат сохраняется Ajax и возвращается сообщение (успех или нет)

- По клику на строку с результатом появляется форма (подгрузка данных через Ajax):

-- в форме выводиться значения ФИО пользователя создавшего результат, вопросы из формы, селектор смены статуса, при выборе в селекторе значения «Обработан» появляется поле Комментарий (обязательно для заполнения в данном статусе)

-- сохранение Ajax, в поле «Время обработки» сохраняется время между созданием результата формы и временем присвоения статуса «Обработан», и возвращается сообщение (успех или нет)


Блок заданий №7

На странице /admin/rand_product/ и на странице реализовать вывод витрины:

- Вывод блока из 10 случайных товаров.

- Над блоком кнопка «Показать еще», по нажатию которой ajax-ом подгружать 10 случайных товаров (не входящих в предыдущий список).

- При просмотре товаров фиксировать только фактически просмотренные товары в окне браузера (хотя бы 70% видимой области товара было в области окна браузера). Показы фиксировать в свойстве элемента товара SHOW_COUNTER (фиксирование производить ajax-ом и фиксировать только один раз для 1 показа витрины).

На странице /admin/img_upload/ и на странице реализовать загрузку изображений:

-  На странице добавить форму загрузки изображений на сервер через ajax (для сохранения данных использовать класс CFile из модуля main) и показывать ссылку для скачивания файла.

- Ссылка должна вести на скрипт на сервере, который для авторизованных пользователей отдает загруженный файл, остальным возвращать ошибку 404.

В разделе /admin/user_new/ создать компонент для вывода имен 3 последних зарегистрированных пользователей на сайте. Добавить кэширование вывода данных на 20 мин. Ссылки со страницы должны вести на страницу просмотра пользователя (созданную в блоке заданий 5).

Добавить обработчик регистрации, запрещать регистрироваться пользователям, чей емэил относиться к домену rambler.ru или list.ru. Так же блокировать регистрацию пользователей с одинаковыми емэйлами в базе. В случае нарушения правил необходимо выводить соответствующее уведомление.

Создать новое почтовое событие и шаблон. В случае успешной регистрации добавить отправку нового почтового события с полями: дата, логин, емэйл зарегистрированного и страницу, откуда он пришел на регистрацию. Письмо отправлять администратору сайта.

Добавить блокировку отправки стандартного почтового события об успешности регистрации пользователя, в случае если его емэйл относиться к домену yandex.ru.

В случае успешной регистрации пользователей сбрасывать кэш компонента регистрации последних 3х пользователей (раздела /admin/user_new/).

Создать функцию, которая ищет зарегистрированных пользователей на сайте за последние 24 часа. В случае наличия таких пользователей, собирает отчет (емэйлы и даты регистраций) и отправляет письмо администратору сайта. Данную функцию добавить на выполнение каждые 24 часа в агент битрикса.

В публичной части в шапке сайта под графиком работы выводить название товара, если просматривается карточка товара (реализовать с помощью отложенной функции).

Создать Highload-блок LowPrice. Поля для хранения данных в HL-блоке определить в соответствии с потребностью реализации (после выполнения задания так же прислать список полей и указанные настройки, тип, код и т.д.).

В карточке товара добавить ссылку «Хочу дешевле». По клику всплывает окно с полями желаемая цена, ФИО и телефон. Если пользователь авторизован, то ФИО и телефон определяются из свойств пользователя с возможностью изменить. По сохранению появляется уведомление «Мы вам сообщим свое решение».

В публичной части создать раздел «Хочу дешевле» /lowprice/. Ссылка в раздел доступна авторизованным пользователям и выводиться в основном меню сайта. В разделе выводиться список товаров с заявками текущего пользователя (идентификация по ID пользователя или телефону). Выводить артикул товара, название, ссылка на товар, дата заявки, состояние заявки и комментарий.

В админ разделе создать раздел /admin/lowprice/ со список заявок из HL-блока. В разделе выводится список заявок: дата, артикул товара, его название, обработан. Над списком заявок вывод фильтра по заявкам, с возможностью фильтровать по: дате создания, состоянию обработан, артикул товара. На странице выводить по 20 заявок и постраничная навигация. Возможность сортировки по дате в порядке возрастания или убывания.

При клике по строке заявки, открывается окно (ajax) с детальной информацией: дата и время заявки, ФИО создавшего, телефон, если пользователь был авторизован, то ФИО ссылка на карточку пользователя (в админ разделе уже реализовано ранее), артикул товара, название (ссылка на карточку товара), фото товара, желаемая цена, актуальная цена на сайте. Если заявка не обработана: поле для ввода комментария (обязательное поле) и кнопка «Обработано». Если заявка обработана: вывод введенного комментария. В случае если заявка привязана к пользователю, то при обработке генерируется почтовое сообщение для пользователя с текстом: артикул товара, дата заявки, комментарием к заявке, дата и время комментария.

В разделе добавить возможность выгрузить отфильтрованные заявки в XML-файл: с детальной информацией по каждой заявке.

- В публичной части сайта добавить раздел «заказ по коду»: форма, несколько строк для ввода кода, при вводе части кода товара, должны показываться возможные 10 вариантов (можно использовать библиотеку jquery.ui.autocomplice), при вводе кода должно появиться поле для указания количества и название товара. Копка добавить в корзину (добавление всех товаров аяксом и фэнсибокс с уведомлением успешного добавления и суммы добавленного товара).

- Для товаров с четными артикулами в четные дни предоставлять скидку 10%. Обрабатывать такие товары уже добавленные в предыдущий день (реализовать через PRODUCT_PROVIDER_CLASS).

- Реализовать оформление заказа в 3 шага: 1 - ввод типа плательщика и способ оплаты, 2 - ввод адреса доставки и комментария, 3 – подтверждение введенных данных. С любого шага можно вернуться на предыдущий с сохранением введенных данных.

- Добавить доп. свойства заказа: ИНН, ФИО ответственного. Поля выводить на 2 этапе, ФИО обязательное для заполнения.

- Добавить служебное доп. свойство заказа: Браузер клиента. Заполнять автоматически.

- В админ разделе добавить подраздел: совершенные заказы. Реализовать вывод всех заказов на сайте (по 10 шт. на странице) с фильтрацией по дате, статусу и поиск заказов по браузеру пользователя (поиск по подстроке). Добавить возможность просмотра таких заказов с детальной информацией (дата заказа, автор, заполненные поля пользователем, статус, кто изменил заказ, состав заказа: товар, цена, количество, название, ссылка на карточку товара). Добавить кнопку выгрузки заказа в XML (в момент скачивания заказа менять статус на «Скачен в XML»).

 <?xml version="1.0" encoding="windows-1251" ?> 
- <Товары>
- <Товар Код="201" Название="Бумага А4">
  <Цена Тип="Базовая">11.50</Цена> 
  <Цена Тип="Москва">12.50</Цена> 
- <Свойства>
  <Плотность>100</Плотность> 
  <Белизна ЕдИзм="%">150</Белизна> 
  </Свойства>
- <Разделы>
  <Раздел>Бумага</Раздел> 
  </Разделы>
  </Товар>
- <Товар Код="202" Название="Бумага А3">
  <Цена Тип="Базовая">18.50</Цена> 
  <Цена Тип="Москва">22.50</Цена> 
- <Свойства>
  <Плотность>90</Плотность> 
  <Белизна ЕдИзм="%">100</Белизна> 
  </Свойства>
- <Разделы>
  <Раздел>Бумага</Раздел> 
  </Разделы>
  </Товар>
- <Товар Код="302" Название="Принтер Canon">
  <Цена Тип="Базовая">3010</Цена> 
  <Цена Тип="Москва">3500</Цена> 
- <Свойства>
  <Формат>A4</Формат> 
  <Формат>A3</Формат> 
  <Тип>Лазерный</Тип> 
  </Свойства>
- <Разделы>
  <Раздел>Принтеры</Раздел> 
  <Раздел>МФУ</Раздел> 
  </Разделы>
  </Товар>
- <Товар Код="305" Название="Принтер HP">
  <Цена Тип="Базовая">3310</Цена> 
  <Цена Тип="Москва">2999</Цена> 
- <Свойства>
  <Формат>A3</Формат> 
  <Тип>Лазерный</Тип> 
  </Свойства>
- <Разделы>
  <Раздел>Принтеры</Раздел> 
  <Раздел>МФУ</Раздел> 
  </Разделы>
  </Товар>
  </Товары>
